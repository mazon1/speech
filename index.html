<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Speech Purpose — Presenter Mode</title>
<style>
body { margin:0; font-family: Arial, sans-serif; }

.slide {
  width:100vw; height:100vh;
  display:flex; align-items:center; justify-content:center;
  font-size:3rem; background:#eef3fb;
  text-align:center; padding:40px;
}

#presenterView {
  display:none;
  grid-template-columns: 2fr 1fr;
  height:100vh;
}

.presenter-left {
  display:flex;
  flex-direction:column;
}

.presenter-right {
  background:#111;
  color:white;
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:20px;
}

.nextSlide {
  background:#333;
  height:200px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.2rem;
}

.notes {
  flex:1;
  overflow:auto;
}

.timer {
  font-size:2rem;
  text-align:center;
}

.controls button {
  font-size:1.5rem;
  margin:10px;
}
</style>
</head>

<body>

<!-- AUDIENCE VIEW -->
<div id="audienceView"></div>

<!-- PRESENTER VIEW -->
<div id="presenterView">

  <div class="presenter-left">
    <div id="presenterSlide" class="slide"></div>
  </div>

  <div class="presenter-right">
    <div class="timer" id="timer">05:00</div>
    <div class="nextSlide" id="nextSlide">Next Slide</div>
    <div class="notes" id="notes">Notes here</div>
    <div class="controls">
      <button onclick="prevSlide()">◀</button>
      <button onclick="nextSlideFunc()">▶</button>
    </div>
  </div>

</div>

<script>
const slides = [
  {
    text:"Establishing a Speech Purpose",
    notes:"Opening — Explain why purpose matters before writing a speech."
  },
  {
    text:"What is a Speech Purpose?",
    notes:"Outcome for audience: think, feel, do."
  },
  {
    text:"Inform • Inspire • Persuade",
    notes:"Explain the three main speech types."
  },
  {
    text:"Purpose Formula",
    notes:"At the end of my speech, my audience will..."
  },
  {
    text:"Without Purpose = Confusion",
    notes:"Rambling, weak structure, no clear takeaway."
  },
  {
    text:"Why this topic? Why this audience? Why now?",
    notes:"Strong closing message."
  }
];

let current = 0;
let presenterWindow = null;

function renderAudience() {
  document.getElementById("audienceView").innerHTML =
    `<div class="slide">${slides[current].text}</div>`;
}

function renderPresenter() {
  document.getElementById("presenterSlide").textContent = slides[current].text;
  document.getElementById("notes").textContent = slides[current].notes;

  if (slides[current+1])
    document.getElementById("nextSlide").textContent = slides[current+1].text;
  else
    document.getElementById("nextSlide").textContent = "End";
}

function nextSlideFunc() {
  if (current < slides.length - 1) current++;
  updateViews();
}

function prevSlide() {
  if (current > 0) current--;
  updateViews();
}

function updateViews() {
  renderAudience();
  if (presenterWindow && !presenterWindow.closed) {
    presenterWindow.updatePresenter(current);
  }
}

function openPresenter() {
  presenterWindow = window.open("", "Presenter",
    "width=900,height=700");

  presenterWindow.document.write(`
    <body style="margin:0;font-family:Arial;">
      <div id="presenterRoot"></div>
      <script>
        const slides = ${JSON.stringify(slides)};
        function updatePresenter(i){
          document.getElementById('presenterRoot').innerHTML =
            '<div style="display:grid;grid-template-columns:2fr 1fr;height:100vh;">' +
            '<div style="display:flex;align-items:center;justify-content:center;font-size:3rem;background:#eef3fb;">' + slides[i].text + '</div>' +
            '<div style="background:#111;color:white;padding:20px;">' +
            '<h2>Notes</h2>' + slides[i].notes +
            '<hr><h3>Next</h3>' + (slides[i+1]?slides[i+1].text:'End') +
            '</div></div>';
        }
      <\/script>
    </body>
  `);

  presenterWindow.updatePresenter(current);
}

renderAudience();

// Open presenter automatically
setTimeout(openPresenter, 500);

// TIMER
let time = 300;
setInterval(()=>{
  if (time > 0) time--;
  let m = Math.floor(time/60).toString().padStart(2,'0');
  let s = (time%60).toString().padStart(2,'0');
  const t = m+":"+s;
  document.getElementById("timer")?.textContent = t;
},1000);

// Keyboard controls
document.addEventListener("keydown", e=>{
  if (e.key === "ArrowRight" || e.key === " ") nextSlideFunc();
  if (e.key === "ArrowLeft") prevSlide();
});
</script>

</body>
</html>
